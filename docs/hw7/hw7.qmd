---
title: "hw7_Gayeon Park"
format: html
output-file: "index"
---

## **Excercise 1**

a\. List some guidelines/advice Wilke gives about creating bar charts.

-   Long labels \> replace horizontal bar plot. (Swap X and Y position)

-   Arranging in order of increasing number (e.g. age)

-   Use stack bars with typing actual number whenever you want to see the difference between each values clearly.

-   Dot plot which is able to show clear difference each values and if alphabetical order is unclear to see, then set ordering of the data values.

b\. When is it not advised to use a bar chart? Why?

-   When you want to show appropriate locations along the x or y axis, using dot graph instead of bar chart. It is because the eye is drawn to the middle of the bars rather than to their end points.

c\. What alternatives to bars are mentioned in this chapter?

-   They suggests using dot plots and heatmaps.

d\. What guidance does Wilke give about whether or not to stack bars vs. dodge them (using an offset in Vega-Lite)?

-   Wilke advises stacking bars when you want to show part-to-whole relationships and compare totals, and dodging (side-by-side) bars when you want to compare subgroup values directly across categories.

e\.

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",

  "data": {
    "url": "https://gist.githubusercontent.com/honggikim02/392bd1d9909ccd3057e58b4684b60319/raw/a3e8e9d07fc7d34889a8d41008dc7e42c355f689/cow-movies.csv"
  },

  "mark": {
    "type": "bar",
    "color": "royalblue"
  },
  "transform": [{"calculate": "datum.amount/1000000",
  "as": "weekend gross (million USD)"}],
  "encoding": {
    "y": {"field": "title_short", "type": "nominal","sort": "-x","title": ""},

    "x": {"field": "weekend gross (million USD)", "type": "quantitative",
    "scale": {"domain": [0,60]},"axis": {"tickCount":3}}
  },

  "width": 400,
  "height": 200
}
' |> as_vegaspec()
```

f\.

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",

  "data": {
    "url": "https://gist.githubusercontent.com/honggikim02/1a4d21a208d781a35ad8e67673e8328d/raw/273695945cd24c8496d8b9a69633a5c55dac371c/cow-income.csv"
  },

  "width": 400,
  "height": 200,
  "mark": {"type": "bar"},
  "transform": [{"filter": "datum.race != \'all\'&& datum.race != \'white_non_hispanic\'"}],
  

  "encoding": {
    "x": {
      "field": "race",
      "type": "nominal",
      "title": "",
      "axis": {"labelAngle": 0},
      "sort": ["asian", "white", "hispanic", "black"]
    },

    "y": {
      "field": "median_income",
      "type": "quantitative",
      "title": "median income (USD)"
      },

    "xOffset": {"field": "age"},

    "color": {"field": "age", "title": "age (yrs)", "scale": {"scheme": "blues"}}
  }
}
' |> as_vegaspec()
```

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",

  "data": {
    "url": "https://gist.githubusercontent.com/honggikim02/1a4d21a208d781a35ad8e67673e8328d/raw/273695945cd24c8496d8b9a69633a5c55dac371c/cow-income.csv"
  },

  "width": 300,
  "height": 200,
  "mark": {"type": "bar"},
  "transform": [{"filter": "datum.race != \'all\' && datum.race != \'white_non_hispanic\'"}],

  "encoding": {
    "x": {
      "field": "age",
      "type": "nominal",
      "title": "",
      "axis": {"labelAngle": 0},
      "sort": ["asian", "white", "hispanic", "black"]
    },

    "y": {
      "field": "median_income",
      "type": "quantitative",
      "title": "median income (USD)"
      },
    "facet": {"field": "race","columns": 2, "sort": ["asian", "white", "hispanic", "black"]}
  }
}
' |> as_vegaspec()
```

g\.

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "data": { 
    "url": "https://gist.githubusercontent.com/honggikim02/483f5529f1f61a953cc829480d80d843/raw/6daa30370eccdf5318da957e2aaa196162507e58/cow-gapminder.csv" },
  
  "height": 300,
  "width": 400,
  "mark": {"type": "circle", "color": "blueviolet"},
  "transform": [{"filter": "datum.year == 2007 && datum.continent == \'Americas\'"}],

  "encoding": {

    "x": {
      "field": "lifeExp", 
      "type": "quantitative",
      "scale": {"domain": [60,80]},
      "axis": {"labelAngle": 0, "tickCount": 5},
      "title": "life expectancy (years)"
    },
    
    "y": {"field": "country", 
    "type": "ordinal", 
    "title": "",
    "sort": "-x",
    "axis": {"grid": true}
  }
}
}
' |> as_vegaspec()
```

## **Excercise 2**

a\. Watch [this video](https://youtu.be/r6-3_bdcofg?si=5tw1QBT5ke_A5ak2&t=1398) starting at 12:18 until 49:52. (You are welcome to watch the whole thing if you like.) You will see some things that look familiar from our discussion of perception in class, but there are also a number of additional examples and discussion.

b\. List at least three pieces of advice you can glean from this video that might help you design good graphics.

-   If you have categorical variables in a dot plot, put them on the y-axis, not the x-axis, to improve readability.

-   Don’t automatically start the y-axis at zero—set it to the lowest meaningful value to avoid wasting space (unless zero is necessary for honest comparison, such as in bar charts).

-   Design graphics to support the comparison you want viewers to make, choosing encodings and layouts that make that comparison visually clear and easy.

c\. There are two figures in this video that come from Chapter 1 of Tufte ([2001](https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Tufte:2001:Visual)). Did you spot them? Which figures are they?

-   The graphic in page 43 which is a narrative graphic of spaces and time.
-   The graphic in page 46 which is a relational graphic.

## **Exercise 3** 

a\. In Vega-Lite lingo, what makes something be a heat map?

-   Use a rect mark ("mark": "rect')

-   x and y position

-   color

b\. Recreate Figure 6.14 or 6.15 from Wilke ([2019](https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019)) (your choice). Or get fancy and include an interactive element that let’s you select the year to order by. [\[CSV\]](https://calvin-data304.netlify.app/data/cow-internet2.csv)

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "data": { 
    "url": "https://gist.githubusercontent.com/honggikim02/64d2cacba5374e559f3372843e62a512/raw/0e57743ef0d78d0706adce66ec581872e3ce4a58/cow-internet2.csv"
  },
  
  "height": 300,
  "width": 400,
  "mark": {"type": "rect"},

  "transform": [
    {
      "calculate": "datum.year == 2016 ? datum.users : null",
      "as": "users_2016"
    }
  ],

  "encoding": {

    "x": {
      "field": "year", 
      "type": "ordinal",
      "title": ""
    },
    
    "y": {
      "field": "country", 
      "type": "nominal", 
      "title": "",
      "axis": {"orient": "right"},
      "sort": {
        "field": "users_2016",
        "op": "max",
        "order": "descending"
      }
    },

    "color": {
      "field": "users",
      "title": "internet users/100 people",
      "type": "quantitative",
      "scale": {"scheme":"magma"},
      "legend": {"orient": "top"}
    } 
  }
}
' |> as_vegaspec()
```

c\. At around 20:10, Healy presents a possible problem with heat maps, what is it?

-   Healy points out that it’s hard for our eyes to interpret relative color differences in heat maps when colored squares are surrounded by other colored squares, which can distort how we perceive individual values.

d\. But starting at around 44:12, he presents a heat map as a “show pony”. Why isn’t the problem presented earlier an issue here? Is it an issue in the figure you make in part b? Why or why not?

-   Healy shows the later “show pony” heat map to highlight broader patterns and overall structure, not the precise value of each cell. In that case, the problem with color comparisons isn’t important because viewers are looking at big patterns rather than exact comparisons between individual values.

## **Excercise 4 (Pie Chart)** 

a\. What does Healy have to say about pie charts in his video?

-   He mentions pie charts as an example of a graph type is often not a good choice for showing data because people are bad at judging angles and areas, which makes it hard to compare slices accurately.

b\. How does that compare to what Wilke says in Section 10.1 of Wilke ([2019](https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019))?

-   Wilke says pie charts are not always bad. He explains that the best chart depends on what you want to show. Pie charts work well for small datasets and for showing simple parts of a whole, like a clear majority.

c\. What alternatives does Wilke present to pie charts and in what situations does he favor each? (You should be comparing pie charts to two other types of graphics that can be made with the same sort of data.)

-   Wilke presents stacked bar charts and side-by-side bar charts as alternatives to pie charts.

-   Stacked bar charts is to show part to whole relationships and compare totals across groups or over time.

-   Side by side bar charts is to directly compare individual categories with each other. Because all bars share the same baseline, it is easier to compare their sizes precisely.

d\. We won’t make many pie charts, but I suppose you should make at least one. To do this in Vega-Lite, use an arc mark. Recreate Figure 10.1 of Wilke ([2019](https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019)).

```{r}
library(vegawidget)
' 
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "data": { 
    "url": "https://cdn.jsdelivr.net/npm/vega-datasets@3.2.1/data/jobs.json" },

"transform": [
    {
      "filter": "datum.year == 1950"
    },
    {
      "filter": {
        "field": "job", 
        "oneOf": ["Actor", "Machinist", "Nurse"]
      }
    }
  ],

  "mark": {"type": "arc"},
  "encoding": {
    "theta":{
      "field":"count",
      "type": "quantitative"},

    "color": {"field": "job", "type": "nominal"}
   }
  }
' |> as_vegaspec()
```
